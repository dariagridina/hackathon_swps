<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Profile - {{ user.first_name }} {{ user.last_name }}</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-5">
  <div class="row">
    <div class="col-md-4">
      <img src="{{ user.profile.image.url }}" alt="Profile Image" class="img-thumbnail">
    </div>
    <div class="col-md-8">
      <h1>{{ user.first_name }} {{ user.last_name }}</h1>
      <p class="lead">{{ user.profile.bio }}</p>
      <div class="mb-3">
        {% if user.profile.linkedin_url %}
          <a href="{{ user.profile.linkedin_url }}" target="_blank" class="btn btn-primary">LinkedIn</a>
        {% endif %}
        {% if user.profile.github_url %}
          <a href="{{ user.profile.github_url }}" target="_blank" class="btn btn-dark">GitHub</a>
        {% endif %}
        <a href="CV.pdf" download class="btn btn-secondary">Download CV</a>
      </div>
      <button class="btn btn-success mb-3">Contact User</button>
    </div>
  </div>
  <hr>
  <h2>Skills</h2>
  <ul>
    {% for skill in user.skills.all %}
      <li>{{ skill.name }}</li>
    {% endfor %}
  </ul>
  <hr>
  <h2>Projects History</h2>
  {% if user.project_memberships.exists %}
    <ul>
      {% for project_membership in user.project_memberships.all %}
        <li>{{ project_membership.project.name }}</li>
      {% endfor %}
    </ul>
  {% else %}
    <p>User has not worked on any projects yet.</p>
  {% endif %}
  <hr>
  <h2>Reviews</h2>
  {% if user.reviews_received.all %}
    {% for review in user.reviews_received.all %}
      <div class="py-4">
        <div class="d-flex align-items-center justify-content-between pb-2 mb-1">
          <div class="d-flex align-items-center me-3">
            <img src="{{ review.reviewer.profile.image.url }}" class="rounded-circle" width="48" alt="Avatar">
            <div class="ps-3">
              <h6 class="fw-semibold mb-0">{{ review.reviewer.first_name }} {{ review.reviewer.last_name }}</h6>
              <span class="fs-sm text-muted">{{ review.project.name }}</span>
            </div>
          </div>
        </div>
        <p class="mb-0">
          {{ review.text }}
        </p>
      </div>
    {% endfor %}
  {% else %}
    <p>User has not received any reviews yet.</p>
  {% endif %}
</div>
</body>
</html>
